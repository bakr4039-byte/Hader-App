<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† - Ù…Ø¬Ù…Ø¹ Ø£Ø¨ÙŠ Ø¨Ù† ÙƒØ¹Ø¨</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸ”— Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</h1>
        <div class="card">
            <input type="text" id="t-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…">
            <input type="text" id="t-id" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ">
            <button onclick="addTeacher()" style="background:#2c3e50; color:white;">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¹Ø¯Ø©</button>
        </div>
        <table>
            <thead><tr><th>Ø§Ù„Ù…Ø¹Ù„Ù…</th><th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
            <tbody id="list-body"></tbody>
        </table>
        <br><a href="admin.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©</a>
    </div>
    <script>
        firebase.initializeApp({ /* Ù†ÙØ³ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø£Ø¹Ù„Ø§Ù‡ */ });
        const db = firebase.database();
        
        function addTeacher() {
            const name = document.getElementById('t-name').value;
            const id = document.getElementById('t-id').value;
            if(name && id) db.ref('teachers_list/' + id).set({ name, id });
        }

        db.ref('teachers_list').on('value', s => {
            const body = document.getElementById('list-body');
            body.innerHTML = "";
            let baseUrl = window.location.href.split('links.html')[0];
            const data = s.val();
            for(let key in data) {
                const link = `${baseUrl}index.html?id=${data[key].id}&name=${encodeURIComponent(data[key].name)}`;
                body.innerHTML += `<tr>
                    <td>${data[key].name}</td>
                    <td>${data[key].id}</td>
                    <td>
                        <button onclick="navigator.clipboard.writeText('${link}'); alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®')">Ù†Ø³Ø®</button>
                        <button onclick="db.ref('teachers_list/${key}').remove()" style="background:red; color:white;">Ø­Ø°Ù</button>
                    </td>
                </tr>`;
            }
        });
    </script>
</body>
</html>